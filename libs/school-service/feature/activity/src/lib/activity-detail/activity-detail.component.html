<ksp-top-nav>
  <span header>
    กิจกรรมพัฒนาตนเอง (หนังสืออนุญาตให้ประกอบวิชาชีพ โดยไม่มีใบอนุญาต)
  </span>
  <span subHeader>เพิ่มกิจกรรมการพัฒนาตนเอง</span>
</ksp-top-nav>

<div class="bg-secondary bg-opacity-10 px-4 py-2 full-height-2">
  <div class="box-header" *ngIf="pageType === activityPageMode.edit">
    รายละเอียดเพิ่มกิจกรรมพัฒนาตนเอง
  </div>
  <div class="box-header" *ngIf="pageType === activityPageMode.view">
    รายละเอียดเพิ่มกิจกรรมพัฒนาตนเอง (หนังสืออนุญาตให้ประกอบวิชาชีพ
    โดยไม่มีใบอนุญาต)
  </div>

  <div class="bg-white p-3">
    <ksp-request-header-info></ksp-request-header-info>
    <hr />
    <!-- <div
      class="bg-light d-flex flex-column justify-content-center p-3 pt-1 mb-3"
    >
      <div class="box-header mb-1">ข้อมูลใบอนุญาตประกอบวิชาชีพ</div>
      <ng-container *ngIf="foundLicenses && foundLicenses.length">
        <div
          id="carouselExampleControls"
          class="carousel carousel-dark slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner">
            <ng-container
              *ngFor="
                let license of foundLicenses;
                let first = first;
                let last = last;
                let i = index
              "
            >
              <div class="carousel-item active" *ngIf="first">
                <div class="d-flex flex-column">
                  <ksp-license-info [license]="license"></ksp-license-info>
                </div>
              </div>
              <div class="carousel-item" *ngIf="!first">
                <div class="d-flex flex-column">
                  <ksp-license-info [license]="license"></ksp-license-info>
                  <div class="carousel-caption d-block top-0 start-0 p-0">
                    <div class="form-label text-secondary">
                      หมายเลขสมาชิกคุรุสภา
                      <span class="form-label text-black ms-3">
                        {{ kuruspaNo || i }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
          <ng-container
            *ngFor="
              let license of foundLicenses;
              let first = first;
              let last = last
            "
          >
            <div *ngIf="!first">
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#carouselExampleControls"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
            </div>
            <div *ngIf="!last">
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#carouselExampleControls"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div></ng-container
          >
        </div>
      </ng-container>
      <ng-container *ngIf="notFound && !foundLicenses.length">
        <div class="fs-5 text-center">ไม่พบข้อมูล</div></ng-container
      >
    </div> -->

    <div class="bg-light mb-3 p-3 pt-1">
      <div class="box-header mb-1">
        ข้อมูลหนังสืออนุญาตให้ประกอบวิชาชีพ โดยไม่มีใบอนุญาต
      </div>

      <!-- <div class="table__scroll">
        <table mat-table [dataSource]="dataSource" [hidden]="!dataSource.data">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ลำดับ</th>
            <td mat-cell *matCellDef="let element; let i = index">
              {{ i + 1 }}
            </td>
          </ng-container>

          <ng-container matColumnDef="licenseno">
            <th mat-header-cell *matHeaderCellDef>เลขที่หนังสืออนุญาต</th>
            <td mat-cell *matCellDef="let element">
              {{ element.licenseno }}
            </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>ชื่อ-นามสกุล</th>
            <td mat-cell *matCellDef="let element">
              {{ element.firstnameth }}{{ element.lastnameth }}
            </td>
          </ng-container>

          <ng-container matColumnDef="licensestartdate">
            <th mat-header-cell *matHeaderCellDef>วันที่ออกหนังสือ</th>
            <td mat-cell *matCellDef="let element">
              {{ element.licensestartdate | thaiDate }}
            </td>
          </ng-container>

          <ng-container matColumnDef="licenseenddate">
            <th mat-header-cell *matHeaderCellDef>วันที่สิ้นสุด</th>
            <td mat-cell *matCellDef="let element">
              {{ element.licenseenddate | thaiDate }}
            </td>
          </ng-container>

          <ng-container matColumnDef="view">
            <th mat-header-cell *matHeaderCellDef>ดูเอกสาร</th>
            <td mat-cell *matCellDef="let element">
              <i role="button" class="box-header text-success bi bi-eye"></i>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <table>
          <tr *ngIf="searchNotFound">
            <td
              class="text-center fs-5"
              [attr.colspan]="displayedColumns.length"
            >
              ไม่พบข้อมูล
            </td>
          </tr>
        </table>
      </div> -->
    </div>

    <div class="bg-light p-3 pt-1" *ngIf="pageType === activityPageMode.view">
      <div class="box-header mb-1">ข้อมูลกิจกรรมพัฒนาตนเอง</div>

      <div class="table__scroll">
        <table
          mat-table
          [dataSource]="dataSource2"
          [hidden]="!dataSource2.data.length"
        >
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ลำดับ</th>
            <td mat-cell *matCellDef="let element; let i = index">
              {{ i + 1 }}
            </td>
          </ng-container>

          <ng-container matColumnDef="selfdeveloptype">
            <th mat-header-cell *matHeaderCellDef>กิจกรรมพัฒนาตนเอง</th>
            <td mat-cell *matCellDef="let element">
              {{ schoolMapSelfDevelopType(+element.selfdeveloptype) }}
            </td>
          </ng-container>

          <ng-container matColumnDef="updatedate">
            <th mat-header-cell *matHeaderCellDef>วันที่แก้ไขล่าสุด</th>
            <td mat-cell *matCellDef="let element">
              {{ element.updatedate | thaiDate }}
            </td>
          </ng-container>

          <ng-container matColumnDef="createdate">
            <th mat-header-cell *matHeaderCellDef>วันที่บันทึก</th>
            <td mat-cell *matCellDef="let element">
              {{ element.createdate | thaiDate }}
            </td>
          </ng-container>

          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef class="text-center">
              แก้ไขข้อมูล
            </th>
            <td mat-cell *matCellDef="let element" class="text-center">
              <i
                role="button"
                class="box-header text-primary bi bi-pencil-square"
              ></i>
            </td>
          </ng-container>

          <ng-container matColumnDef="view">
            <th mat-header-cell *matHeaderCellDef class="text-center">
              ดูข้อมูล
            </th>
            <td mat-cell *matCellDef="let element" class="text-center">
              <i role="button" class="box-header text-success bi bi-eye"></i>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
        </table>
        <table>
          <tr *ngIf="searchNotFound2">
            <td
              class="text-center fs-5"
              [attr.colspan]="displayedColumns2.length"
            >
              ไม่พบข้อมูล
            </td>
          </tr>
        </table>
      </div>
    </div>

    <ng-container *ngIf="pageType === activityPageMode.edit">
      <div class="bg-light px-3 py-3">
        <form [formGroup]="form">
          <div class="box-header mb-2">กิจกรรมการพัฒนาตนเอง</div>
          <div class="row">
            <div class="col-8 mb-2">
              <select
                formControlName="type"
                class="form-select"
                style="white-space: break-spaces"
                #selector
              >
                <option value="null" selected hidden disabled>
                  กรุณาเลือก
                </option>
                <option
                  class="form-label text-black"
                  *ngFor="let activity of activityTypes"
                  [value]="activity.value"
                >
                  {{ activity.label }}
                </option>
              </select>
            </div>
          </div>

          <ksp-activity-add-degree
            *ngIf="selector.value === '0'"
            formControlName="detail"
          ></ksp-activity-add-degree>

          <ksp-activity-diploma-receive
            *ngIf="selector.value === '1'"
            formControlName="detail"
          ></ksp-activity-diploma-receive>

          <ksp-activity-seminar
            *ngIf="selector.value === '2'"
            formControlName="detail"
          ></ksp-activity-seminar>

          <ksp-activity-academic-archivement
            *ngIf="selector.value === '3'"
            formControlName="detail"
          ></ksp-activity-academic-archivement>

          <ksp-activity-lecturer
            *ngIf="selector.value === '4'"
            formControlName="detail"
          ></ksp-activity-lecturer>

          <ksp-activity-write-book
            *ngIf="selector.value === '5'"
            formControlName="detail"
          ></ksp-activity-write-book>

          <ksp-activity-innovation
            *ngIf="selector.value === '6'"
            formControlName="detail"
          ></ksp-activity-innovation>

          <ksp-activity-research
            *ngIf="selector.value === '7'"
            formControlName="detail"
          ></ksp-activity-research>

          <ksp-activity-reward
            *ngIf="selector.value === '8'"
            formControlName="detail"
          ></ksp-activity-reward>

          <ksp-activity-lecture-register
            *ngIf="selector.value === '9'"
            formControlName="detail"
          ></ksp-activity-lecture-register>

          <ksp-activity-study-tour
            *ngIf="selector.value === '10'"
            formControlName="detail"
          ></ksp-activity-study-tour>

          <ksp-activity-learning-material
            *ngIf="selector.value === '11'"
            formControlName="detail"
          ></ksp-activity-learning-material>
        </form>
      </div>

      <ng-container *ngIf="selector.value !== 'null'">
        <div class="mt-3">
          <ksp-form-multi-attachment
            [uniqueTimestamp]="uniqueTimestamp"
            title="กรุณาแนบหลักฐานประกอบการปฏิบัติงาน"
            [groups]="attachFiles"
          ></ksp-form-multi-attachment></div></ng-container
    ></ng-container>
  </div>
</div>

<div class="sticky-bottom border px-2">
  <ksp-bottom-nav
    [isFirstPage]="pageType === 1"
    [isLastPage]="true"
    [showCenterButtons]="pageType === 1"
    [showCancelButton]="pageType === 1"
    [showSaveButton]="pageType === 1"
    (prevClicked)="cancel()"
    (saveClicked)="confirmDialog()"
    (cancelClicked)="cancel()"
    [disableSaveButton]="form.invalid"
  ></ksp-bottom-nav>
</div>
