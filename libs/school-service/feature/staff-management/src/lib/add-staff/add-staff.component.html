<ksp-top-nav>
  <span header>ทะเบียนบุคลากรภายในหน่วยงาน</span>
  <span subHeader>เพิ่มบุคลากร</span>
</ksp-top-nav>

<div [formGroup]="form" class="bg-secondary bg-opacity-10 px-4 py-2">
  <div class="box-header pt-1 mb-1">รายละเอียดเพิ่มบุคลากรภายในหน่วยงาน</div>

  <div class="bg-white p-3">
    <ksp-request-header-info [requestDate]="today"></ksp-request-header-info>

    <div class="bg-light p-3 m-3">
      <ksp-form-user-info
        formControlName="userInfo"
        [isDarkMode]="false"
        [prefixList]="prefixList$ | async"
      ></ksp-form-user-info>
    </div>

    <div class="bg-light p-3 m-3">
      <div class="box-header">ข้อมูลใบอนุญาตประกอบวิชาชีพ</div>
      <div class="d-flex align-items-center">
        <div class="form-label text-secondary ms-5">หมายเลขสมาชิกคุรุสภา</div>
        <div class="form-label text-black ms-3">1234567890</div>
      </div>

      <ksp-license-type-button-group></ksp-license-type-button-group>
      <div class="ms-5">
        <ksp-license-info></ksp-license-info>
      </div>
    </div>

    <div class="m-3">
      <mat-tab-group
        class="tab-group"
        animationDuration="0ms"
        dynamicHeight="true"
        selectedIndex="0"
      >
        <mat-tab label="ที่อยู่" class="tab-content">
          <ksp-form-address
            [provinces]="provinces$ | async"
            [amphurs]="amphurs1$ | async"
            [tumbols]="tumbols1$ | async"
            (provinceChanged)="provinceChanged(1, $event)"
            (amphurChanged)="amphurChanged(1, $event)"
            formControlName="addr1"
          >
            ที่อยู่ทะเบียนบ้าน
          </ksp-form-address>

          <ksp-form-address
            [provinces]="provinces$ | async"
            [amphurs]="amphurs2$ | async"
            [tumbols]="tumbols2$ | async"
            (provinceChanged)="provinceChanged(2, $event)"
            (amphurChanged)="amphurChanged(2, $event)"
            formControlName="addr2"
          >
            <span>ที่อยู่ที่ติดต่อได้สะดวก</span>
            <div class="d-flex align-items-center">
              <input
                (change)="useSameAddress($event)"
                type="checkbox"
                class="address__checkbox"
              />
              <label class="form-label ms-1">ที่อยู่ตามทะเบียนบ้าน</label>
            </div>
          </ksp-form-address>
        </mat-tab>

        <mat-tab label="วุฒิทางการศึกษา">
          <ksp-form-education-info
            formControlName="edu1"
            [showSelectDegree]="true"
            [countries]="countries$ | async"
          ></ksp-form-education-info
          ><br />
          <ksp-form-education-info
            formControlName="edu2"
            [showSelectDegree]="true"
            [countries]="countries$ | async"
          ></ksp-form-education-info>
        </mat-tab>

        <mat-tab label="ข้อมูลการสอนและการจ้าง">
          <ksp-form-teaching-info
            formControlName="teachingInfo"
          ></ksp-form-teaching-info>
          <ksp-form-hiring-info
            formControlName="hiringInfo"
            [staffTypes]="staffTypes$ | async"
            [positionTypes]="positionTypes$ | async"
            [academicStandingList]="academicTypes$ | async"
          ></ksp-form-hiring-info>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>

<div class="sticky-bottom border">
  <ksp-bottom-nav
    [isLastPage]="true"
    [isFirstPage]="true"
    [showSaveButton]="true"
    [disableSaveButton]="!form.valid"
    [showCenterButtons]="true"
    (saveClicked)="onConfirmed()"
    (cancelClicked)="cancel()"
  ></ksp-bottom-nav>
</div>
