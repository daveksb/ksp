<ksp-top-nav>
  <span header>ยื่นใบคำขอ</span>
  <span subHeader
    >รายละเอียดใบคำขอหนังสืออนุญาตประกอบวิชาชีพ โดยไม่มีใบอนุญาตประกอบวิชาชีพ
    (ชาวไทย)
  </span>
</ksp-top-nav>

<form [formGroup]="form">
  <div class="bg-secondary bg-opacity-10 px-4 py-2 full-width-2">
    <div class="box-header">
      รายละเอียดใบคำขอหนังสืออนุญาตประกอบวิชาชีพ โดยไม่มีใบอนุญาตประกอบวิชาชีพ
      (ชาวไทย)
    </div>

    <div class="bg-white px-4 py-2">
      <ksp-request-header-info
        [requestDate]="today"
        [requestNumber]="requestNo"
      ></ksp-request-header-info>

      <hr />

      <div class="bg-light px-4 py-2">
        <div class="box-header text-primary">ค้นหารายการ</div>

        <!-- <div class="row mb-3">
        <div class="col-6">
          <label class="form-label">หมายเลขบัตรประชาชน</label>
          <input class="form-control" type="text" disabled />
        </div>
      </div> -->

        <!-- <ksp-form-user-info [mode]="'view'"></ksp-form-user-info> -->
        <ksp-form-user-info
          [mode]="'view'"
          [prefixList]="prefixList$ | async"
          [nationList]="[]"
          [countryList]="[]"
          [visaClassList]="[]"
          [visaTypeList]="[]"
          [displayMode]="[userInfoFormType]"
          formControlName="userInfo"
        ></ksp-form-user-info>
      </div>

      <br />

      <!-- (selectedIndexChange)="onTabIndexChanged($event)" -->
      <mat-tab-group
        class="tab-group mb-3"
        animationDuration="0ms"
        dynamicHeight="true"
        (selectedTabChange)="tabChanged($event)"
        selectedIndex="0"
      >
        <mat-tab label="ที่อยู่">
          <ksp-form-address
            [mode]="'view'"
            formControlName="addr1"
            [provinces]="provinces$ | async"
            [amphurs]="amphurs1$ | async"
            [tumbols]="tumbols1$ | async"
          >
            <span>ที่อยู่ทะเบียนบ้าน</span>
          </ksp-form-address>

          <div class="mt-3">
            <ksp-form-address
              [mode]="'view'"
              formControlName="addr2"
              [provinces]="provinces$ | async"
              [amphurs]="amphurs2$ | async"
              [tumbols]="tumbols2$ | async"
            >
              <span>ที่อยู่ที่ติดต่อได้สะดวก</span>
              <!-- <div class="mt-2 ms-2 d-flex align-items-center">
              <input type="checkbox" disabled />
              <label class="form-label ms-2">ที่อยู่ตามทะเบียนบ้าน</label>
            </div> -->
            </ksp-form-address>
          </div>
        </mat-tab>

        <mat-tab label="ที่อยู่ของสถานศึกษาที่ขออนุญาต">
          <ksp-form-school-address
            [mode]="'view'"
            formControlName="schoolAddr"
          ></ksp-form-school-address>
        </mat-tab>

        <mat-tab label="ข้อมูลทางการศึกษา">
          <div>
            <ksp-form-education-info [mode]="'view'" formControlName="edu1">
              <span class="box-header">ข้อมูลทางการศึกษา</span>
            </ksp-form-education-info>
          </div>

          <div class="mt-4">
            <ksp-form-education-info
              formControlName="edu2"
              class="mt-5"
              [mode]="'view'"
              [showPropertyInput]="true"
            >
              <span class="box-header">ข้อมูลทางการศึกษา</span>
            </ksp-form-education-info>
          </div>

          <!-- <div class="mx-4 my-3">
          <label class="form-label"
            >คุณสมบัติอื่นที่สอดคล้องหรือเป็นประโยชน์ต่อการจัดการเรียนการสอนในกลุ่มสาระหรือรายวิชาที่สอน
            (พิจารณาเป็นรายกรณี)
          </label>
          <textarea
            class="form-control"
            rows="3"
            placeholder="โปรดระบุ"
            disabled
          ></textarea>
        </div> -->
          <!-- <br />
          <ksp-form-attachment
            class="mt-3"
            [title]="'หลักฐานประกอบ'"
            [groups]="educationInfo"
            [mode]="'view'"
          ></ksp-form-attachment> -->
        </mat-tab>

        <mat-tab label="ข้อมูลการสอนและการจ้าง">
          <ksp-form-teaching-info
            [mode]="'view'"
            formControlName="teachinginfo"
          ></ksp-form-teaching-info>
          <!-- <ksp-form-attachment
            [title]="'หลักฐานประกอบ'"
            [groups]="teachingInfo"
            [mode]="'view'"
          ></ksp-form-attachment> -->
          <ksp-form-hiring-info
            [positionTypes]="positionTypes$ | async"
            formControlName="hiringinfo"
            [mode]="'view'"
            [displayMode]="'request'"
          ></ksp-form-hiring-info>

          <ksp-form-temp-license-number></ksp-form-temp-license-number>
        </mat-tab>

        <mat-tab label="ข้อมูลชี้แจงเหตุผล">
          <ksp-form-reason-info [mode]="'view'"></ksp-form-reason-info>
          <!-- <ksp-form-attachment
            [title]="'หลักฐานประกอบ'"
            [groups]="reasonInfo"
            [mode]="'view'"
          ></ksp-form-attachment> -->
        </mat-tab>

        <mat-tab label="เอกสารหลักฐานประกอบ">
          <ksp-form-attachment
            [title]="'หลักฐานประกอบ'"
            [groups]="evidenceFiles"
            [mode]="'view'"
          ></ksp-form-attachment>
        </mat-tab>
      </mat-tab-group>
    </div>
    <br />

    <div class="bg-white p-4">
      <e-service-license-check
        [choices]="verifyChoice"
      ></e-service-license-check>
    </div>
  </div>

  <div class="sticky-bottom border">
    <ksp-bottom-nav
      (cancelClicked)="cancel()"
      (prevClicked)="prevPage()"
      (nextClicked)="next()"
      [showSaveButton]="true"
      [showCenterButtons]="true"
      [isFirstPage]="true"
      (saveClicked)="checkRequest()"
    ></ksp-bottom-nav>
  </div>
</form>
