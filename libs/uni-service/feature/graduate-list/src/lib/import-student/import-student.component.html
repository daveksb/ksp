<div class="container">
  <div class="title__label">
    รายละเอียดใบคำขอ > <span>ขอยื่นรายชื่อผู้เข้าศึกษา</span>
  </div>
  <div class="content__container">
    <div class="content__header">
      <div class="label__content">
        วันที่ทำรายการ :
        <span class="label__content--primary">10 ตุลาคม 2565</span>
      </div>
      <div class="label__content">
        เลขใบคำขอ :
        <span class="label__content--secondary">112234467876543</span>
      </div>
    </div>
    <hr />

    <div class="detail__container">
      <div class="header__detail">
        <div class="detail__header">ขอยื่นรายชื่อผู้เข้าศึกษา</div>
        <div>
          <button
            type="button"
            class="btn btn-upload-secondary btn-sm label__button"
          >
            <img src="/assets/images/img-uni/microsoft excel.png" />
            ดาวน์โหลดแบบฟอร์ม
          </button>
          <button type="button" class="btn btn-upload btn-sm label__button">
            <img src="/assets/images/img-uni/Upload.svg" /> อัพโหลดไฟล์
          </button>
        </div>
      </div>

      <div class="table">
        <p-table
          [value]="users"
          responsiveLayout="scroll"
          dataKey="id"
          editMode="row"
        >
          <ng-template pTemplate="header">
            <tr>
              <th class="table__order" *ngIf="pageType === 1">ลำดับ</th>
              <th class="table__header" *ngIf="pageType === 2">
                ครั้งที่สภาอนุมัติ
              </th>
              <th class="table__header" *ngIf="pageType === 2">
                วันที่สภาอนุมัติ
              </th>
              <th class="table__header" *ngIf="pageType === 2">
                วันที่จบการศึกษา
              </th>
              <th class="table__header" *ngIf="pageType === 2">
                สถานที่ปฏิบัติการสอน
              </th>
              <th class="table__header">วันที่รับเข้า</th>
              <th class="table__header">
                เลขบัตรประจำตัวประชาชน/เลขประจำตัวคุรุสภา
              </th>
              <th class="table__header">หมายเลขหนังสือเดินทาง</th>
              <th class="table__header">คำนำหน้าชื่อ</th>
              <th class="table__header">ชื่อ</th>
              <th class="table__header">นามสกุล</th>
              <th class="table__header">คำนำหน้าชื่อ</th>
              <th class="table__header">ชื่อ</th>
              <th class="table__header">นามสกุล</th>
              <th class="table__header">เบอร์โทรศัพท์มือถือ</th>
              <th class="table__header">วัน/เดือน/ปีเกิด(พ.ศ.)</th>
              <th class="table__header">ที่อยู่</th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body"
            let-product
            let-editing="editing"
            let-ri="rowIndex"
          >
            <tr [pEditableRow]="product">
              <td class="table__order" *ngIf="pageType === 1">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    {{ product.id }}
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.id }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header" *ngIf="pageType === 2">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.approveTime"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.approveTime }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header" *ngIf="pageType === 2">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="date"
                      [(ngModel)]="product.graduateDate"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.graduateDate }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header" *ngIf="pageType === 2">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="date"
                      [(ngModel)]="product.approveDate"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.approveDate }}
                  </ng-template>
                </p-cellEditor>
              </td>

              <td class="table__header" *ngIf="pageType === 2">
                <div (click)="searchAddress()" class="table__detail">
                  สถานที่ปฏิบัติการสอน
                </div>
              </td>

              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="date"
                      [(ngModel)]="product.startDate"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.startDate }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.personId"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.personId }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.passportId"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.passportId }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText [(ngModel)]="product.titleTh" required />
                    <!--  <p-dropdown
                      [options]="sexType"
                      [(ngModel)]="product.titleTh"
                      [style]="{ width: '100%' }"
                    ></p-dropdown> -->
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.titleTh }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.firstNameTh"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.firstNameTh }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.lastNameTh"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.lastNameTh }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.titleEn"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.titleEn }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.firstNameEn"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.firstNameEn }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.lastNameEn"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.lastNameEn }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="text"
                      [(ngModel)]="product.phone"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.phone }}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td class="table__header">
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      pInputText
                      type="date"
                      [(ngModel)]="product.birthDate"
                      required
                    />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ product.birthDate }}
                  </ng-template>
                </p-cellEditor>
              </td>

              <td class="table__header">
                <div [pRowToggler]="product" class="table__detail">
                  รายละเอียดที่อยู่
                </div>
              </td>

              <td style="text-align: center">
                <button
                  *ngIf="!editing"
                  type="button"
                  pInitEditableRow
                  (click)="onRowEditInit(product)"
                >
                  edit
                </button>
                <button
                  *ngIf="editing"
                  type="button"
                  pSaveEditableRow
                  (click)="onRowEditSave(product)"
                >
                  save
                </button>
                <button
                  *ngIf="editing"
                  type="button"
                  pCancelEditableRow
                  (click)="onRowEditCancel(product, ri)"
                >
                  cancel
                </button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="rowexpansion" let-product>
            <ksp-form-address></ksp-form-address>
          </ng-template>
        </p-table>

        <div class="detail__footer">
          <button type="button" class="btn btn-add">
            <img
              src="/assets/images/img-uni/add-icon.svg"
              class="icon__add"
            />เพิ่มรายชื่อ
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="bottom__container">
  <div class="footer">
    <button (click)="cancel()" class="btn-primary">ยกเลิก</button>
    <button class="btn-secondary">บันทึกชั่วคราว</button>
    <button (click)="save()" class="btn-third">บันทึกและยื่นใบคำขอ</button>
  </div>
</div>
