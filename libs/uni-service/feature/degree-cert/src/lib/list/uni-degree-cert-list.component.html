<ksp-top-nav>
  <span header>ยื่นใบคำขอ </span>
  <span subHeader>ขอรับรองปริญญาและประกาศนียบัตร </span>
</ksp-top-nav>

<div class="bg-secondary bg-opacity-10 px-4 py-3 full-height full-width-2">
  <div class="box-header">รายการขอรับรองปริญญาและประกาศนียบัตรทางการศึกษา</div>
  <!-- no api
  <ksp-uni-form-badge></ksp-uni-form-badge> -->

  <div class="search-container bg-white p-3">
    <form [formGroup]="form">
      <ksp-degree-cert-search (cleared)="clear()" (searched)="search()" formControlName="search"
        [uniUniversityOption]="uniUniversityOption"></ksp-degree-cert-search>
    </form>
    <br />
    <div class="d-flex justify-content-end my-1">
      <a class="btn border-primary text-primary btn-upload mb-2" type="buton"
        [routerLink]="['/degree-cert', 'request']">+ สร้างใบคำขอ</a>
    </div>
    
    <div class="box-header">รายการแบบคำขอเปลี่ยนแปลงรายละเอียดรับรองปริญญาและประกาศนียบัตรทางการศึกษา</div>
    <div class="table-responsive">
      <table class="degree-cert-list-table" mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="key" hidden>
          <th mat-header-cell  *matHeaderCellDef>key</th>
          <td mat-cell *matCellDef="let element">{{ element.key }}</td>
        </ng-container>
        <ng-container matColumnDef="order">
          <th mat-header-cell  *matHeaderCellDef>ลำดับ</th>
          <td mat-cell *matCellDef="let element">{{ element.order }}</td>
        </ng-container>

        <ng-container matColumnDef="degreeId">
          <th mat-header-cell   *matHeaderCellDef>เลขที่ใบคำขอ</th>
          <td mat-cell *matCellDef="let element">{{ element.degreeId }}</td>
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>วันที่ยื่นใบคำขอ</th>
          <td mat-cell *matCellDef="let element">{{ element.date }}</td>
        </ng-container>

        <ng-container matColumnDef="uni">
          <th mat-header-cell *matHeaderCellDef>สถาบัน/มหาวิทยาลัย</th>
          <td mat-cell *matCellDef="let element">{{ element.uni }}</td>
        </ng-container>

        <ng-container matColumnDef="major">
          <th mat-header-cell *matHeaderCellDef>ชื่อปริญญา/สาขาวิชา</th>
          <td mat-cell *matCellDef="let element">{{ element.major }}</td>
        </ng-container>

        <ng-container matColumnDef="verifyStatus">
          <th mat-header-cell *matHeaderCellDef>สถานะตรวจสอบ</th>
          <td mat-cell *matCellDef="let element">
            {{ element.verifyStatus }}
          </td>
        </ng-container>

        <ng-container matColumnDef="considerStatus">
          <th mat-header-cell *matHeaderCellDef>สถานะพิจารณา</th>
          <td mat-cell *matCellDef="let element">
            {{ element.considerStatus }}
          </td>
        </ng-container>

        <ng-container matColumnDef="approveStatus">
          <th mat-header-cell *matHeaderCellDef>สถานะรับรอง</th>
          <td mat-cell *matCellDef="let element">
            {{ element.approveStatus }}
          </td>
        </ng-container>

        <ng-container matColumnDef="approveDate">
          <th mat-header-cell *matHeaderCellDef>วันที่รับรอง</th>
          <td mat-cell *matCellDef="let element">
            {{ element.approveDate }}
          </td>
        </ng-container>

        <ng-container matColumnDef="editDate">
          <th mat-header-cell *matHeaderCellDef>วันที่แก้ไขล่าสุด</th>
          <td mat-cell *matCellDef="let element">{{ element.editDate }}</td>
        </ng-container>

        <ng-container matColumnDef="verify">
          <th mat-header-cell *matHeaderCellDef>ตรวจสอบ</th>

          <td mat-cell *matCellDef="let element">
            <span class="rounded-pill d-flex justify-content-center" [ngClass]="{
                edit__status: element.verify === 'แก้ไข',
                verify__status: element.verify === 'ตรวจสอบแล้ว',
                modify__status: element.verify === 'ปรับแก้ไข/เพิ่มเติม'
              }">
              {{ element.verify }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="consider">
          <th mat-header-cell *matHeaderCellDef>พิจารณา</th>
          <td mat-cell *matCellDef="let element">
            <span class="rounded-pill d-flex justify-content-center" [ngClass]="{
                edit__status: element.consider === 'แก้ไข',
                verify__status: element.consider === 'ตรวจสอบแล้ว',
                modify__status: element.consider === 'ปรับแก้ไข/เพิ่มเติม'
              }">
              {{ element.consider }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="edit">
          <th mat-header-cell *matHeaderCellDef>แก้ไข</th>
          <td mat-cell *matCellDef="let element">
            <i role="button" (click)="onEdit(element)" class="bi bi-pencil-square fs-5 text-primary"></i>
          </td>
        </ng-container>

        <ng-container matColumnDef="print">
          <th mat-header-cell *matHeaderCellDef>พิมพ์ใบคำขอ</th>
          <td class="text-center" mat-cell *matCellDef="let element">
            <i role="button" (click)="onPrint(element)" class="bi bi-printer-fill fs-5 text-primary"></i>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
      <mat-paginator [length]="pageEvent.length" [pageSize]="pageEvent.pageSize" [pageSizeOptions]="pageSizeOptions"
        (page)="onPaginatorEvent($event)" [pageIndex]="pageEvent.pageIndex">
      </mat-paginator>
    </div>
  </div>
</div>