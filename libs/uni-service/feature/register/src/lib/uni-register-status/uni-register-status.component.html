<div *ngIf="isLoading | async" class="overlay">
  <mat-progress-spinner class="spinner" mode="indeterminate">
  </mat-progress-spinner>
</div>

<ksp-top-nav-2>ตรวจสอบยื่นผู้ประสานงาน</ksp-top-nav-2>

<div class="bg-secondary bg-opacity-10 py-4 full-height">
  <div class="container-xl bg-white pb-3">
    <div class="box-header pt-2">ค้นหาหน่วยงาน/สถานศึกษา</div>
    <hr />

    <ksp-retired-search
      (clear)="handleClear($event)"
      (search)="handleSearch($event)"
      [searchType]="'uni'"
      [subsearchType]="'unistatus'"
    ></ksp-retired-search>

    <ng-container *ngIf="data.length">
      <hr />
      <div class="text-primary box-header">ผลการค้นหา</div>
      <table class="table table-responsive">
        <thead style="background-color: #edf6ff">
          <tr>
            <!-- <th style="width: 30%; min-width: 300px;">สิทธิ์สำหรับการเข้าใช้งาน</th> -->
            <th style="width: 30%; min-width: 150px;">ชื่อ-นามสกุล</th>
            <!-- <th style="width: 20%; min-width: 100px;">เบอร์โทรศัพท์</th> -->
            <th style="width: 20%; min-width: 100px;">สถานะ</th>
          </tr>
        </thead>
        <tbody class="body__table">
          <tr class="text-secondary" *ngFor="let item of data">
            <!-- <td>{{ item.educationoccupy.permissionname }}</td> -->
            <td>{{ item.firstnameth + ' ' + item.lastnameth }}</td>
            <!-- <td>{{ item.contactphone }}</td> -->
            <td>{{ item.requeststatusname }}</td>
          </tr>
        </tbody>
      </table>
      <mat-paginator
        [length]="pageEvent.length"
        [pageSize]="pageEvent.pageSize"
        [pageSizeOptions]="pageSizeOptions"
        (page)="onPaginatorEvent($event)"
        [pageIndex]="pageEvent.pageIndex"
      >
    </mat-paginator>
      <div class="py-2 d-flex justify-content-center">
        <a
          class="btn btn-primary"
          type="buton"
          (click)="goLogin()"
          >เข้าสู่ระบบ</a
        >
      </div>
    </ng-container>
  </div>
</div>
