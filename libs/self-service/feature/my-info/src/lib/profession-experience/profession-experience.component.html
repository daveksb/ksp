<ksp-top-nav [isSelfService]="true">
  <span header>ข้อมูลของฉัน</span>
  <span subHeader>ข้อมูลประสบการณ์วิชาชีพ</span>
</ksp-top-nav>

<div class="main__container px-4 py-2 full-height">
  <div class="box-header">ข้อมูลประสบการณ์วิชาชีพ</div>
  <div class="detail__container p-3">
    <form [formGroup]="form">
      <div class="d-flex justify-content-between">
        <div class="fs-5">สถานศึกษาฝึกประสบการณ์วิชาชีพ</div>

        <div class="text-primary fs-5" role="button">
          <ksp-add-row-button
            class="text-primary fs-6"
            (addRowClick)="addFormArray(0)"
          >
            เพิ่ม
          </ksp-add-row-button>
        </div>
      </div>

      <ng-container formArrayName="licenseInfo1">
        <ng-container
          *ngFor="let DegreeForm of licenseInfo1.controls; let i = index"
        >
          <ng-container [formGroupName]="i">
            <div class="border rounded p-3 mb-3">
              <div class="d-flex justify-content-end">
                <i
                  class="bi bi-x-circle-fill text-danger"
                  role="button"
                  (click)="deleteFormArray(licenseInfo1, i)"
                ></i>
              </div>
              <self-service-form-user-training-workplace
                formControlName="licenseForm"
              ></self-service-form-user-training-workplace>
            </div> </ng-container></ng-container
      ></ng-container>
      <hr />

      <div class="d-flex justify-content-between">
        <div class="fs-5">สภานศึกษาที่ปฎิบัติการสอน</div>

        <div class="text-primary fs-5" role="button">
          <ksp-add-row-button
            class="text-primary"
            (addRowClick)="addFormArray(1)"
          >
            เพิ่ม
          </ksp-add-row-button>
        </div>
      </div>

      <ng-container formArrayName="licenseInfo2">
        <ng-container
          *ngFor="let DegreeForm of licenseInfo2.controls; let i = index"
        >
          <ng-container [formGroupName]="i">
            <div class="border rounded p-3 mb-3">
              <div class="d-flex justify-content-end">
                <i
                  class="bi bi-x-circle-fill text-danger"
                  role="button"
                  (click)="deleteFormArray(licenseInfo2, i)"
                ></i>
              </div>
              <self-service-form-user-workplace
                formControlName="licenseForm"
                [provinces]="provinces1$ | async"
                [amphurs]="amphurs1$ | async"
                [tumbols]="tumbols1$ | async"
                [bureaus]="bureau$ | async"
                (provinceChanged)="provinceChanged(1, $event)"
                (amphurChanged)="amphurChanged(1, $event)"
              ></self-service-form-user-workplace>
            </div> </ng-container></ng-container
      ></ng-container>
      <hr />

      <div class="d-flex justify-content-between">
        <div class="fs-5">ใบอนุญาตประกอบวิชาชีพครูจากต่างประเทศ</div>

        <div class="text-primary fs-5" role="button">
          <ksp-add-row-button
            class="text-primary"
            (addRowClick)="addFormArray(2)"
          >
            เพิ่ม
          </ksp-add-row-button>
        </div>
      </div>

      <ng-container formArrayName="licenseInfo3">
        <ng-container
          *ngFor="let DegreeForm of licenseInfo3.controls; let i = index"
        >
          <ng-container [formGroupName]="i">
            <div class="border rounded p-3 mb-3">
              <div class="d-flex justify-content-end">
                <i
                  class="bi bi-x-circle-fill text-danger"
                  role="button"
                  (click)="deleteFormArray(licenseInfo3, i)"
                ></i>
              </div>
              <ksp-experience-form
                [countries]="countries$ | async"
                [licenses]="licenses$ | async"
                formControlName="licenseForm"
              ></ksp-experience-form>
            </div> </ng-container></ng-container
      ></ng-container>
      <hr />
      <br />
      <ksp-form-attachment [groups]="info" [mode]="mode"></ksp-form-attachment>
    </form>
  </div>
  <div class="d-flex justify-content-center my-3">
    <button class="btn btn-secondary me-2">ล้างข้อมูล</button>
    <button class="btn btn-primary" (click)="onSave()">แก้ไขข้อมูล</button>
  </div>
</div>
