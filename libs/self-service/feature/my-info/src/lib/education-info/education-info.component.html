<ksp-top-nav [isSelfService]="true">
  <span header>ข้อมูลของฉัน</span>
</ksp-top-nav>

<div class="main__container px-4 py-2 full-height">
  <div class="box-header">ข้อมูลทางการศึกษา</div>
  <form [formGroup]="form">
    <div class="detail__container p-3">
      <div class="border rounded px-3 py-2 mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <div class="fs-5 text-dark">ปริญญาตรี</div>
          <div class="d-flex align-items-center">
            <ksp-add-row-button
              [class]="'text-primary'"
              *ngIf="mode !== 'view'"
              (addRowClick)="addFormArray(0)"
            >
              เพิ่ม
            </ksp-add-row-button>

            <div *ngIf="licenseInfo1.length > 0">
              <button
                class="btn btn-link text-secondary w-auto p-0 ms-3"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseExample1"
                aria-expanded="false"
                aria-controls="collapseExample"
              >
                ดูเพิ่มเติม <i class="bi bi-chevron-down"></i>
              </button>
            </div>
          </div>
        </div>

        <ng-container formArrayName="licenseInfo1">
          <ng-container
            *ngFor="let DegreeForm of licenseInfo1.controls; let i = index"
          >
            <ng-container [formGroupName]="i">
              <div class="collapse show" id="collapseExample1">
                <hr />
                <div class="d-flex justify-content-end" *ngIf="mode === 'edit'">
                  <i
                    class="bi bi-x-circle-fill text-danger"
                    role="button"
                    (click)="deleteFormArray(licenseInfo1, i)"
                  ></i>
                </div>
                <ksp-activity-add-degree
                  [mode]="mode"
                  formControlName="licenseForm"
                  [countries]="countries$ | async"
                >
                </ksp-activity-add-degree>
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>

      <div class="border rounded px-3 py-2 mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <div class="fs-5 text-dark">ปริญญาโท</div>
          <div class="d-flex align-items-center">
            <ksp-add-row-button
              [class]="'text-primary'"
              *ngIf="mode !== 'view'"
              (addRowClick)="addFormArray(1)"
            >
              เพิ่ม
            </ksp-add-row-button>

            <div *ngIf="licenseInfo2.length > 0">
              <button
                class="btn btn-link text-secondary w-auto p-0 ms-3"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseExample2"
                aria-expanded="false"
                aria-controls="collapseExample"
              >
                ดูเพิ่มเติม <i class="bi bi-chevron-down"></i>
              </button>
            </div>
          </div>
        </div>

        <ng-container formArrayName="licenseInfo2">
          <ng-container
            *ngFor="let DegreeForm of licenseInfo2.controls; let i = index"
          >
            <ng-container [formGroupName]="i">
              <div class="collapse show" id="collapseExample2">
                <hr />
                <div class="d-flex justify-content-end" *ngIf="mode === 'edit'">
                  <i
                    class="bi bi-x-circle-fill text-danger"
                    role="button"
                    (click)="deleteFormArray(licenseInfo2, i)"
                  ></i>
                </div>
                <ksp-activity-add-degree
                  [mode]="mode"
                  formControlName="licenseForm"
                  [countries]="countries$ | async"
                >
                </ksp-activity-add-degree>
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>

      <div class="border rounded px-3 py-2 mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <div class="fs-5 text-dark">ปริญญาเอก</div>
          <div class="d-flex align-items-center">
            <ksp-add-row-button
              [class]="'text-primary'"
              *ngIf="mode !== 'view'"
              (addRowClick)="addFormArray(2)"
            >
              เพิ่ม
            </ksp-add-row-button>

            <div *ngIf="licenseInfo3.length > 0">
              <button
                class="btn btn-link text-secondary w-auto p-0 ms-3"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseExample3"
                aria-expanded="false"
                aria-controls="collapseExample"
              >
                ดูเพิ่มเติม <i class="bi bi-chevron-down"></i>
              </button>
            </div>
          </div>
        </div>

        <ng-container formArrayName="licenseInfo3">
          <ng-container
            *ngFor="let DegreeForm of licenseInfo3.controls; let i = index"
          >
            <ng-container [formGroupName]="i">
              <div class="collapse show" id="collapseExample3">
                <hr />
                <div class="d-flex justify-content-end" *ngIf="mode === 'edit'">
                  <i
                    class="bi bi-x-circle-fill text-danger"
                    role="button"
                    (click)="deleteFormArray(licenseInfo3, i)"
                  ></i>
                </div>
                <ksp-activity-add-degree
                  [mode]="mode"
                  formControlName="licenseForm"
                  [countries]="countries$ | async"
                >
                </ksp-activity-add-degree>
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>

      <div class="border rounded px-3 py-2 mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <div class="fs-5 text-dark">ปริญญาอื่นๆ</div>
          <div class="d-flex align-items-center">
            <ksp-add-row-button
              [class]="'text-primary'"
              *ngIf="mode !== 'view'"
              (addRowClick)="addFormArray(3)"
            >
              เพิ่ม
            </ksp-add-row-button>
            <div *ngIf="licenseInfo4.length > 0">
              <button
                class="btn btn-link text-secondary w-auto p-0 ms-3"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseExample4"
                aria-expanded="false"
                aria-controls="collapseExample"
              >
                ดูเพิ่มเติม <i class="bi bi-chevron-down"></i>
              </button>
            </div>
          </div>
        </div>

        <ng-container formArrayName="licenseInfo4">
          <ng-container
            *ngFor="let DegreeForm of licenseInfo4.controls; let i = index"
          >
            <ng-container [formGroupName]="i">
              <div class="collapse show" id="collapseExample4">
                <hr />
                <div class="d-flex justify-content-end" *ngIf="mode === 'edit'">
                  <i
                    class="bi bi-x-circle-fill text-danger"
                    role="button"
                    (click)="deleteFormArray(licenseInfo4, i)"
                  ></i>
                </div>
                <ksp-activity-add-degree
                  [mode]="mode"
                  formControlName="licenseForm"
                  [countries]="countries$ | async"
                >
                </ksp-activity-add-degree>
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>
      <div class="border rounded px-3 py-2">
        <div class="d-flex justify-content-between align-items-start">
          <div class="fs-5 text-dark">ใบรับรองฝึกอาชีพ</div>
          <div class="d-flex align-items-center">
            <ksp-add-row-button
              [class]="'text-primary'"
              *ngIf="mode !== 'view'"
              (addRowClick)="addFormArray(4)"
            >
              เพิ่ม
            </ksp-add-row-button>

            <div *ngIf="licenseInfo5.length > 0">
              <button
                class="btn btn-link text-secondary w-auto p-0 ms-3"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseExample5"
                aria-expanded="false"
                aria-controls="collapseExample"
              >
                ดูเพิ่มเติม <i class="bi bi-chevron-down"></i>
              </button>
            </div>
          </div>
        </div>

        <ng-container formArrayName="licenseInfo5">
          <ng-container
            *ngFor="let DegreeForm of licenseInfo5.controls; let i = index"
          >
            <ng-container [formGroupName]="i">
              <div class="collapse show" id="collapseExample5">
                <hr />

                <div class="d-flex justify-content-end" *ngIf="mode === 'edit'">
                  <i
                    class="bi bi-x-circle-fill text-danger"
                    role="button"
                    (click)="deleteFormArray(licenseInfo5, i)"
                  ></i>
                </div>

                <self-service-transfer-knowledge-career-cert
                  formControlName="licenseForm"
                  [mode]="mode"
                ></self-service-transfer-knowledge-career-cert>
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </form>
  <div class="d-flex justify-content-center my-3">
    <button
      type="button"
      class="btn text-secondary bg-light border-secondary me-2"
      (click)="clear()"
    >
      ล้างข้อมูล
    </button>
    <button
      type="button"
      class="btn"
      (click)="onClickSave()"
      [ngClass]="mode === 'edit' ? 'btn-success' : 'btn-primary'"
    >
      {{ label }}
    </button>
  </div>
</div>
