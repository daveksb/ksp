<ksp-top-nav [isSelfService]="true"><span header>หน้าแรก</span></ksp-top-nav>

<div class="full-height main__container py-2 px-4">
  <ksp-uni-form-badge [mainTitle]="badgeTitle"></ksp-uni-form-badge>
  <div class="row" style="overflow-x: auto">
    <div class="col p-0">
      <self-service-slideshow></self-service-slideshow>
      <br />
    </div>
    <div class="col p-0">
      <self-service-slideshow-second></self-service-slideshow-second>
      <br />
    </div>
  </div>
  <self-service-license-info
    [header]="'สถานะใบคำขอ'"
    [subheader1]="'ใบคำขอที่ต้องชำระเงิน'"
    [subheader2]="'ใบคำขอทั้งหมด'"
    [subheader3]="'รอการอนุมัติ'"
    [subheader4]="'ปรับแก้ไข / เพิ่มเติม'"
    [date]="'1'"
    [requestNo]="'1'"
    [KuruspaId]="'1'"
    [personId]="'1'"
  ></self-service-license-info>
  <br />

  <div class="box-header">ค้นหาใบคำขอ</div>
  <div [formGroup]="form" class="box__container px-4 py-3">
    <div class="row">
      <div class="col-md mb-2">
        <label class="form-label">เลขที่ใบคำขอ</label>
        <input type="text" class="form-control" formControlName="requestno" />
      </div>
      <div class="col-md mb-2">
        <label class="form-label">ประเภทใบคำขอ</label>
        <select class="form-select" formControlName="requesttype">
          <option selected>กรุณาเลือก</option>
          <option value="1">ขอขึ้นทะเบียนใบอนุญาตประกอบวิชาชีพ</option>
          <option value="2">ขอต่ออายุใบอนุญาตประกอบวิชาชีพ</option>
          <option value="3">ขอเปลี่ยนแปลง/แก้ไขใบอนุญาตประกอบวิชาชีพ</option>
          <option value="4">ขอใบแทนใบอนุญาตประกอบวิชาชีพ</option>
          <option value="5">ขอหนังสือรับรองความรู้</option>
          <option value="6">ขอยื่นเทียบเคียงความรู้</option>
          <option value="30">ขอคืนเงินค่าธรรมเนียม</option>
          <option value="40">ขอรับรางวัลคุรุสภา</option>
          <option value="41">ขอรับรางวัลครูภาษาไทยดีเด่น</option>
          <option value="42">
            ขอรับรางวัลครูผู้สอนดีเด่นตามกลุ่มสาระการเรียนรู้
          </option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 mb-2">
        <label class="form-label">วันที่ยื่นคำขอ</label>
        <input type="date" class="form-control" formControlName="requestdate" />
      </div>
      <div class="col-md-3 mb-2">
        <label class="form-label">สถานะการชำระเงิน</label>
        <select class="form-select">
          <option selected>กรุณาเลือก</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
      <div class="col-md mb-2">
        <label class="form-label">สถานะรายการ</label>
        <select class="form-select">
          <option selected>กรุณาเลือก</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
    </div>

    <div class="d-flex justify-content-center">
      <button class="btn btn-secondary me-2" (click)="clear()">
        ล้างข้อมูล
      </button>
      <button class="btn btn-primary ms-2" (click)="search()">ค้นหา</button>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center my-2">
    <div class="box-header">
      สรุปผลลัพธ์การค้นหา {{ dataSource.data.length }} รายการ
    </div>
    <button
      mat-button
      [matMenuTriggerFor]="license"
      class="btn text-primary border-primary bg-white"
    >
      + สร้างใบคำขอ
    </button>
    <mat-menu #license="matMenu">
      <button mat-menu-item [matMenuTriggerFor]="request">
        ขอขึ้นทะเบียนใบอนุญาตประกอบวิชาชีพ
      </button>
      <button mat-menu-item [matMenuTriggerFor]="renew">
        ขอต่ออายุใบอนุญาตประกอบวิชาชีพ
      </button>
      <button mat-menu-item (click)="substituteLicense()">
        ขอใบแทนใบอนุญาตประกอบวิชาชีพ
      </button>
      <button mat-menu-item (click)="transfer()">ขอหนังสือรับรองความรู้</button>
      <button mat-menu-item (click)="compare()">ขอยื่นเทียบเคียงความรู้</button>
      <button mat-menu-item (click)="refundFee()">ขอคืนค่าธรรมเนียม</button>
      <button mat-menu-item (click)="reward()">
        ขอรับรางวัลการยกย่องเชิดชูเกียรติ
      </button>
    </mat-menu>

    <mat-menu #request="matMenu">
      <button mat-menu-item [matMenuTriggerFor]="teacher">ครู</button>
      <button mat-menu-item [matMenuTriggerFor]="manager">
        ผู้บริหารสถานศึกษา
      </button>
      <button mat-menu-item (click)="eduManagerRequest()">
        ผู้บริหารการศึกษา
      </button>
      <button mat-menu-item (click)="studySupervision()">ศึกษานิเทศก์</button>
    </mat-menu>

    <mat-menu #renew="matMenu">
      <button mat-menu-item [matMenuTriggerFor]="renewTeacher">ครู</button>
      <button mat-menu-item [matMenuTriggerFor]="renewManager">
        ผู้บริหารสถานศึกษา
      </button>
      <button mat-menu-item (click)="eduManagerRenew()">
        ผู้บริหารการศึกษา
      </button>
      <button mat-menu-item (click)="supervisionRenew()">ศึกษานิเทศก์</button>
    </mat-menu>

    <mat-menu #teacher="matMenu">
      <button mat-menu-item (click)="thaiTeacher()">ครูชาวไทย</button>
      <button mat-menu-item (click)="foreignTeacher(1)">ครูชาวต่างชาติ</button>
    </mat-menu>

    <mat-menu #renewTeacher="matMenu">
      <button mat-menu-item (click)="teacherRenew()">ครูชาวไทย</button>
      <button mat-menu-item (click)="foreignRenew(1)">ครูชาวต่างชาติ</button>
    </mat-menu>

    <mat-menu #manager="matMenu">
      <button mat-menu-item (click)="schoolManager()">
        ผู้บริหารสถานศึกษาชาวไทย
      </button>
      <button mat-menu-item (click)="foreignTeacher(2)">
        ผู้บริหารสถานศึกษาชาวต่างชาติ
      </button>
    </mat-menu>

    <mat-menu #renewManager="matMenu">
      <button mat-menu-item (click)="schManagerRenew()">
        ผู้บริหารสถานศึกษาชาวไทย
      </button>
      <button mat-menu-item (click)="foreignRenew(2)">
        ผู้บริหารสถานศึกษาชาวต่างชาติ
      </button>
    </mat-menu>
  </div>

  <div class="table-responsive" style="white-space: nowrap">
    <table matSort mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="order">
        <th mat-header-cell *matHeaderCellDef>ลำดับ</th>
        <td mat-cell *matCellDef="let element; let i = index">
          {{
            paginator.pageIndex === 0
              ? i + 1
              : 1 + i + this.paginator.pageIndex * this.paginator.pageSize
          }}
        </td>
      </ng-container>

      <ng-container matColumnDef="requestno">
        <th mat-header-cell *matHeaderCellDef>เลขที่คำขอ</th>
        <td mat-cell *matCellDef="let element">
          {{ element.requestno }}
        </td>
      </ng-container>

      <ng-container matColumnDef="requestdate">
        <th mat-header-cell *matHeaderCellDef>วันที่ยื่นคำขอ</th>
        <td mat-cell *matCellDef="let element">
          {{ toThaiDate(element.requestdate) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>ชื่อ-นามสกุล</th>
        <td mat-cell *matCellDef="let element">
          {{ element.firstnameth }} {{ element.lastnameth }}
        </td>
      </ng-container>

      <ng-container matColumnDef="paymentStatus">
        <th mat-header-cell *matHeaderCellDef>สถานะการชำระเงิน</th>
        <td mat-cell *matCellDef="let element">
          {{ element.paymentStatus }}
        </td>
      </ng-container>

      <ng-container matColumnDef="listStatus">
        <th mat-header-cell *matHeaderCellDef>สถานะรายการ</th>
        <td mat-cell *matCellDef="let element">{{ element.listStatus }}</td>
      </ng-container>

      <ng-container matColumnDef="process">
        <th mat-header-cell *matHeaderCellDef>ขั้นตอน</th>
        <td mat-cell *matCellDef="let element">{{ element.process }}</td>
      </ng-container>

      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef>แก้ไข</th>
        <td mat-cell *matCellDef="let element">
          <i
            (click)="goToDetail(element)"
            role="button"
            class="bi bi-pencil-square text-primary fs-5"
          ></i>
        </td>
      </ng-container>

      <ng-container matColumnDef="print">
        <th mat-header-cell *matHeaderCellDef>พิมพ์ใบคำขอ</th>
        <td mat-cell *matCellDef="let element">
          <i role="button" class="bi bi-printer-fill text-primary fs-5"></i>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <mat-paginator
    [hidden]="!dataSource.data.length"
    [length]="dataSource.data.length"
    [pageSize]="25"
    [showFirstLastButtons]="true"
  >
  </mat-paginator>
</div>
